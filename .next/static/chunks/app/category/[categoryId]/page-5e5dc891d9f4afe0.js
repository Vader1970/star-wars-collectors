(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{8419:function(e,a,t){Promise.resolve().then(t.bind(t,6827))},6827:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return J}});var s=t(7437),l=t(2265),r=t(9376),i=t(3078),n=t(4362),c=t(2381),o=t(9397),d=t(4794),m=t(7067),u=t(9820),h=t(5868),x=t(8930),g=t(2208),b=e=>{let{item:a,onEdit:t,onDelete:l,onViewDetails:r,showActions:i=!0}=e;return(0,s.jsx)(u.Zb,{className:"bg-white border border-gray-200 hover:border-gray-300 transition-all duration-200 group cursor-pointer flex flex-col ".concat("h-[415px]"),children:(0,s.jsxs)(u.aY,{className:"p-0 flex flex-col flex-1 h-full",children:[(0,s.jsxs)("div",{className:"relative",children:[a.image?(0,s.jsx)("img",{src:a.image,alt:a.name,className:"w-full h-48 object-cover rounded-t-lg"}):(0,s.jsx)("div",{className:"w-full h-48 bg-gray-100 rounded-t-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"No image"})}),i&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(c.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),t(a)},className:"h-8 w-8 p-0 bg-white/90 hover:bg-white","aria-label":"Edit",children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})}),(0,s.jsx)(c.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),l(a.id)},className:"h-8 w-8 p-0 bg-white/90 hover:bg-white border-red-200 text-red-600 hover:bg-red-50","aria-label":"Delete",children:(0,s.jsx)(x.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col flex-1 justify-between min-h-[180px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800 mb-3 text-lg line-clamp-2 min-h-[2.4em]",children:a.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 mb-4 min-h-[4.5em]",children:[(0,s.jsx)("div",{className:"text-sm font-medium ".concat("In Stock"===a.stockStatus?"text-green-600":"text-red-600"),children:a.stockStatus}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:a.rating?(0,s.jsxs)(s.Fragment,{children:["Rating: ",a.rating]}):(0,s.jsx)("span",{className:"opacity-0",children:"empty"})}),(0,s.jsx)("div",{className:"text-sm",children:a.valuation?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-black font-medium",children:"Value:"}),(0,s.jsx)("span",{className:"text-red-600 font-bold",children:a.valuation.toLocaleString("en-US",{style:"currency",currency:"USD"})})]}):(0,s.jsx)("span",{className:"opacity-0",children:"empty"})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-auto",children:[(0,s.jsxs)(c.z,{variant:"outline",size:"sm",className:"flex-1 justify-center text-blue-700 border-blue-200 hover:bg-blue-50",onClick:e=>{e.stopPropagation(),r(a.id)},"aria-label":"View",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),"View"]}),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),t(a)},className:"h-9 w-9 p-0 bg-white/90 hover:bg-gray-100","aria-label":"Edit",children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})}),(0,s.jsx)(c.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),l(a.id)},className:"h-9 w-9 p-0 bg-white/90 hover:bg-red-50 border-red-200 text-red-600","aria-label":"Delete",children:(0,s.jsx)(x.Z,{className:"w-4 h-4"})})]})]})]})]})})},p=e=>{let{showItems:a,user:t,subcategories:l,categoryItems:r,onAddSubcategory:i,onAddItem:n,onEditCategory:u,onDeleteCategory:h,onViewCategory:x,onEditItem:g,onDeleteItem:p,onViewItemDetails:f}=e;return r.length>0?(0,s.jsxs)("div",{className:"container mx-auto px-6 pb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Items (",r.length,")"]}),t&&(0,s.jsxs)(c.z,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),0===r.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsxs)("div",{className:"text-slate-400 mb-4",children:[(0,s.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-800 rounded-full flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"w-8 h-8"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No items yet"}),(0,s.jsx)("p",{className:"text-slate-500 mb-6",children:"Add your first collectible item to this category."})]}),t&&(0,s.jsxs)(c.z,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Add First Item"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map(e=>(0,s.jsx)(b,{item:e,onEdit:g,onDelete:p,onViewDetails:f,showActions:!!t},e.id))})]}):(0,s.jsxs)("div",{className:"container mx-auto px-6 pb-8",children:[(0,s.jsx)("div",{className:"flex justify-end items-center gap-3 mb-8",children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.z,{onClick:i,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Add Subcategory"]}),(0,s.jsxs)(c.z,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})}),0===l.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsxs)("div",{className:"text-slate-400 mb-4",children:[(0,s.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-800 rounded-full flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-8 h-8"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No subcategories yet"}),(0,s.jsx)("p",{className:"text-slate-500 mb-6",children:"Create your first subcategory to organize your collection."})]}),t&&(0,s.jsxs)(c.z,{onClick:i,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Add First Subcategory"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(e=>(0,s.jsx)(m.Z,{category:e,onEdit:u,onDelete:h,onView:x,showActions:!!t},e.id))})]})},f=t(2660),j=e=>{let{currentCategory:a,onBackNavigation:t,onBackToHome:l}=e;return(0,s.jsx)("div",{className:"relative bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsxs)(c.z,{variant:"outline",onClick:t,className:"bg-slate-800 border-slate-600 text-white hover:bg-slate-700",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,s.jsxs)(c.z,{variant:"outline",onClick:l,className:"bg-slate-800 border-slate-600 text-white hover:bg-slate-700",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[a.image&&(0,s.jsx)("img",{src:a.image,alt:a.name,className:"w-32 h-32 object-cover rounded-lg border-2 border-blue-500/30"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:a.name}),a.description&&(0,s.jsx)("p",{className:"text-slate-300 text-lg",children:a.description})]})]})]})})},v=t(1259),N=t(4291),y=t(279),w=t(5060),k=t(3675),C=t(8951),S=t(875),I=t(2135),F=t(401),z=t(3448);let Z=C.fC;C.ZA;let _=C.B4,M=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(C.xz,{ref:a,className:(0,z.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[l,(0,s.jsx)(C.JO,{asChild:!0,children:(0,s.jsx)(S.Z,{className:"h-4 w-4 opacity-50"})})]})});M.displayName=C.xz.displayName;let A=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(C.u_,{ref:a,className:(0,z.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(I.Z,{className:"h-4 w-4"})})});A.displayName=C.u_.displayName;let E=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(C.$G,{ref:a,className:(0,z.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(S.Z,{className:"h-4 w-4"})})});E.displayName=C.$G.displayName;let V=l.forwardRef((e,a)=>{let{className:t,children:l,position:r="popper",...i}=e;return(0,s.jsx)(C.h_,{children:(0,s.jsxs)(C.VY,{ref:a,className:(0,z.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(A,{}),(0,s.jsx)(C.l_,{className:(0,z.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(E,{})]})})});V.displayName=C.VY.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(C.__,{ref:a,className:(0,z.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=C.__.displayName;let D=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(C.ck,{ref:a,className:(0,z.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(C.wU,{children:(0,s.jsx)(F.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(C.eT,{children:l})]})});D.displayName=C.ck.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(C.Z0,{ref:a,className:(0,z.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=C.Z0.displayName;var G=t(1817),P=t(7689),U=t(2489),R=t(1579),O=t(3340),B=t(1072);let L=()=>{let[e,a]=(0,l.useState)([]),[t,s]=(0,l.useState)(!1),{toast:r}=(0,O.pm)(),[i,n]=(0,l.useState)(null),c=async()=>{try{let{data:e,error:t}=await B.O.from("items").select("manufacturer").not("manufacturer","is",null).not("manufacturer","eq","");if(t)throw t;let s=[...new Set(e.map(e=>e.manufacturer).filter(Boolean))].sort();a(s)}catch(e){n("Failed to load manufacturers")}};return(0,l.useEffect)(()=>{c()},[]),{manufacturers:e,loading:t,setLoading:s,addManufacturer:t=>e.some(e=>e.toLowerCase()===t.toLowerCase())?(r({title:"Duplicate Manufacturer",description:"This manufacturer already exists",variant:"destructive"}),!1):(a(e=>[...e,t].sort()),r({title:"Manufacturer Added",description:"The manufacturer will be saved when you save the item"}),!0),editManufacturer:(t,s)=>{let l=e.indexOf(t);if(-1===l)return!1;if(e.some((e,a)=>e.toLowerCase()===s.toLowerCase()&&a!==l))return r({title:"Duplicate Manufacturer",description:"This manufacturer name already exists",variant:"destructive"}),!1;let i=[...e];return i[l]=s,a(i.sort()),r({title:"Manufacturer Updated",description:"The change will be saved when you save the item"}),!0},error:i}},T=e=>{let{value:a,onChange:t,onSave:l,onCancel:r,placeholder:i,loading:n}=e;return(0,s.jsxs)("div",{className:"flex gap-2 items-center mt-1",children:[(0,s.jsx)(y.I,{autoFocus:!0,value:a,placeholder:i,className:"flex-1 bg-white border-gray-300 text-black",onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.key&&a.trim()&&!n&&l(),"Escape"===e.key&&r()},disabled:n}),(0,s.jsx)(c.z,{type:"button",className:"px-2",disabled:!a.trim()||n,onClick:l,children:(0,s.jsx)(F.Z,{className:"w-4 h-4"})}),(0,s.jsx)(c.z,{type:"button",className:"px-2",variant:"ghost",onClick:r,disabled:n,children:(0,s.jsx)(U.Z,{className:"w-4 h-4"})})]})};var Y=t(5675);let $=e=>{let{value:a,onChange:t,manufacturers:l,onEdit:r,onAddNew:i,loading:n}=e;return(0,s.jsxs)(Z,{value:a,onValueChange:t,children:[(0,s.jsx)(M,{className:"bg-white border-gray-300 text-black",children:(0,s.jsx)(_,{placeholder:"Select manufacturer"})}),(0,s.jsxs)(V,{className:"bg-white max-h-60 overflow-y-auto z-[60]",children:[l.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center w-full group",children:[(0,s.jsx)(D,{value:e,className:"flex-1",children:e}),(0,s.jsx)(c.z,{type:"button",size:"sm",variant:"ghost",tabIndex:-1,className:"p-1 ml-1 text-gray-400 hover:text-blue-600",onClick:t=>{t.stopPropagation(),r(e,a)},children:(0,s.jsx)(Y.Z,{className:"w-3 h-3"})})]},e)),(0,s.jsx)("div",{className:"px-2 py-1",children:(0,s.jsx)(c.z,{type:"button",className:"w-full text-blue-600 justify-start px-2 py-1",variant:"ghost",onClick:i,disabled:n,children:"+ Add Manufacturer"})})]})]})};function q(e){let{value:a,onChange:t,initialManufacturers:r=[]}=e,{manufacturers:i,loading:n,setLoading:c,addManufacturer:o,editManufacturer:d}=L(),[m,u]=(0,l.useState)("select"),[h,x]=(0,l.useState)(""),[g,b]=(0,l.useState)(null),p=async()=>{if(!h.trim())return;let e=h.trim();o(e)&&(t(e),x(""),u("select"))},f=async()=>{if(null===g||!h.trim())return;let e=i[g],a=h.trim();d(e,a)&&(t(a),x(""),b(null),u("select"))},j=()=>{x(""),u("select"),b(null)};return"add"===m?(0,s.jsx)(T,{value:h,onChange:x,onSave:p,onCancel:j,placeholder:"Manufacturer name",loading:n}):"edit"===m&&null!==g?(0,s.jsx)(T,{value:h,onChange:x,onSave:f,onCancel:j,placeholder:"Manufacturer name",loading:n}):(0,s.jsx)("div",{children:(0,s.jsx)($,{value:a,onChange:t,manufacturers:i,onEdit:(e,a)=>{u("edit"),b(a),x(e)},onAddNew:()=>{x(""),u("add"),b(null)},loading:n})})}let K=Array.from({length:19},(e,a)=>{let t=(.5*a+1).toFixed(1).replace(".0","");return"C-".concat(t)}),H=Array.from({length:17},(e,a)=>(5*a+20).toString());var W=e=>{let{isOpen:a,onClose:t,onSave:r,item:i,categoryId:n}=e,[o,d]=(0,l.useState)({name:"",stockStatus:"In Stock",rating:"",valuation:"",manufacturer:"",yearManufactured:"",afaNumber:"",afaGrade:"",description:"",boughtFor:"",variations:""}),[m,u]=(0,l.useState)([]),[h,x]=(0,l.useState)(!1),{toast:g}=(0,O.pm)();(0,l.useEffect)(()=>{if(i){var e,a,t;d({name:i.name||"",stockStatus:i.stockStatus||"In Stock",rating:i.rating||"",valuation:(null===(e=i.valuation)||void 0===e?void 0:e.toString())||"",manufacturer:i.manufacturer||"",yearManufactured:(null===(a=i.yearManufactured)||void 0===a?void 0:a.toString())||"",afaNumber:i.afaNumber||"",afaGrade:i.afaGrade||"",description:i.description||"",boughtFor:(null===(t=i.boughtFor)||void 0===t?void 0:t.toString())||"",variations:i.variations||""}),i.images&&i.images.length>0?u(i.images):i.image?u([i.image]):u([])}else d({name:"",stockStatus:"In Stock",rating:"",valuation:"",manufacturer:"",yearManufactured:"",afaNumber:"",afaGrade:"",description:"",boughtFor:"",variations:""}),u([])},[i]);let b=async e=>{let a=Array.from(e.target.files||[]),t=4-m.length,s=a.slice(0,t);if(a.length>t&&g({title:"Upload Limit",description:"You can only upload ".concat(t," more image(s). Maximum of 4 images allowed."),variant:"destructive"}),0!==s.length){x(!0);try{let e=s.map(async e=>{try{return await (0,R.I)(e)}catch(a){return g({title:"Upload Error",description:"Failed to upload ".concat(e.name),variant:"destructive"}),null}}),a=(await Promise.all(e)).filter(e=>null!==e);a.length>0&&(u(e=>[...e,...a]),g({title:"Upload Successful",description:"".concat(a.length," image(s) uploaded successfully")}))}catch(e){g({title:"Upload Error",description:"Failed to upload images",variant:"destructive"})}finally{x(!1)}}},p=e=>{u(a=>a.filter((a,t)=>t!==e))},f=async e=>{e.preventDefault();let a=m.filter(e=>e.startsWith("data:")),s=m.filter(e=>!e.startsWith("data:"));if(a.length>0){x(!0);try{let e=a.map(async(e,a)=>{let t=(0,R.o)(e,"".concat(o.name,"-").concat(a,".jpg"));return await (0,R.I)(t)}),t=await Promise.all(e);s=[...s,...t],g({title:"Processing Complete",description:"All images have been uploaded to cloud storage"})}catch(e){g({title:"Upload Error",description:"Some images failed to upload",variant:"destructive"})}finally{x(!1)}}r({name:o.name,categoryId:n,stockStatus:o.stockStatus,rating:o.rating||void 0,valuation:o.valuation?parseFloat(o.valuation):void 0,image:s[0]||void 0,images:s.length>0?s:void 0,manufacturer:o.manufacturer||void 0,yearManufactured:o.yearManufactured?parseInt(o.yearManufactured):void 0,afaNumber:o.afaNumber||void 0,afaGrade:o.afaGrade?o.afaGrade:void 0,description:o.description||void 0,boughtFor:o.boughtFor?parseFloat(o.boughtFor):void 0,variations:o.variations||void 0}),t()};return(0,s.jsx)(N.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(N.cZ,{className:"bg-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(N.fK,{children:(0,s.jsx)(N.$N,{className:"text-black",children:i?"Edit Item":"Add New Item"})}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"name",className:"text-black",children:"Item Name *"}),(0,s.jsx)(y.I,{id:"name",value:o.name,onChange:e=>d(a=>({...a,name:e.target.value})),required:!0,className:"bg-white border-gray-300 text-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"stockStatus",className:"text-black",children:"Stock Status"}),(0,s.jsxs)(Z,{value:o.stockStatus,onValueChange:e=>d(a=>({...a,stockStatus:e})),children:[(0,s.jsx)(M,{className:"bg-white border-gray-300 text-black",children:(0,s.jsx)(_,{})}),(0,s.jsxs)(V,{className:"bg-white",children:[(0,s.jsx)(D,{value:"In Stock",children:"In Stock"}),(0,s.jsx)(D,{value:"Out of Stock",children:"Out of Stock"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"rating",className:"text-black",children:"Rating"}),(0,s.jsxs)(Z,{value:o.rating,onValueChange:e=>d(a=>({...a,rating:e})),children:[(0,s.jsx)(M,{className:"bg-white border-gray-300 text-black",id:"rating",children:(0,s.jsx)(_,{placeholder:"Select rating"})}),(0,s.jsx)(V,{className:"bg-white max-h-60 overflow-y-auto",children:K.map(e=>(0,s.jsx)(D,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"valuation",className:"text-black",children:"Valuation ($)"}),(0,s.jsx)(y.I,{id:"valuation",type:"number",step:"0.01",value:o.valuation,onChange:e=>d(a=>({...a,valuation:e.target.value})),className:"bg-white border-gray-300 text-black"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"boughtFor",className:"text-black",children:"Bought For ($)"}),(0,s.jsx)(y.I,{id:"boughtFor",type:"number",step:"0.01",value:o.boughtFor,onChange:e=>d(a=>({...a,boughtFor:e.target.value})),className:"bg-white border-gray-300 text-black"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"manufacturer",className:"text-black",children:"Manufacturer"}),(0,s.jsx)(q,{value:o.manufacturer,onChange:e=>d(a=>({...a,manufacturer:e}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"yearManufactured",className:"text-black",children:"Year"}),(0,s.jsx)(y.I,{id:"yearManufactured",type:"number",value:o.yearManufactured,onChange:e=>d(a=>({...a,yearManufactured:e.target.value})),className:"bg-white border-gray-300 text-black"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"afaNumber",className:"text-black",children:"AFA Number"}),(0,s.jsx)(y.I,{id:"afaNumber",value:o.afaNumber,onChange:e=>d(a=>({...a,afaNumber:e.target.value})),className:"bg-white border-gray-300 text-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"afaGrade",className:"text-black",children:"AFA Grade"}),(0,s.jsxs)(Z,{value:o.afaGrade||"none",onValueChange:e=>d(a=>({...a,afaGrade:"none"===e?"":e})),children:[(0,s.jsx)(M,{className:"bg-white border-gray-300 text-black",id:"afaGrade",children:(0,s.jsx)(_,{placeholder:"Select grade"})}),(0,s.jsxs)(V,{className:"bg-white max-h-60 overflow-y-auto",children:[(0,s.jsx)(D,{value:"none",children:"None"}),H.map(e=>(0,s.jsx)(D,{value:e,children:e},e))]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"variations",className:"text-black",children:"Variations"}),(0,s.jsx)(y.I,{id:"variations",value:o.variations,onChange:e=>d(a=>({...a,variations:e.target.value})),className:"bg-white border-gray-300 text-black"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{className:"text-black",children:"Images (Maximum 4)"}),(0,s.jsxs)("div",{className:"space-y-4 mt-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",id:"image-upload",multiple:!0,disabled:m.length>=4||h}),(0,s.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},className:"w-full bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100",disabled:m.length>=4||h,children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Z,{className:"w-4 h-4 mr-2"}),m.length>=4?"Maximum 4 Images Reached":"Upload Images (".concat(m.length,"/4)")]})})]}),m.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:m.map((e,a)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("img",{src:e,alt:"Preview ".concat(a+1),className:"w-full h-24 object-cover rounded-lg border border-gray-300"}),(0,s.jsx)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>p(a),className:"absolute top-1 right-1 bg-red-600/90 border-red-500 text-white hover:bg-red-700 w-6 h-6 p-0",disabled:h,children:(0,s.jsx)(U.Z,{className:"w-3 h-3"})}),0===a&&(0,s.jsx)("div",{className:"absolute bottom-1 left-1 bg-blue-600/90 text-white text-xs px-2 py-1 rounded",children:"Main"})]},a))}),(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-800",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"âœ… Cloud Storage Active"}),(0,s.jsx)("p",{children:"Images are automatically uploaded to Cloudflare's global CDN for optimal performance and reliability."})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w._,{htmlFor:"description",className:"text-black",children:"Description"}),(0,s.jsx)(k.g,{id:"description",value:o.description,onChange:e=>d(a=>({...a,description:e.target.value})),rows:3,className:"bg-white border-gray-300 text-black"})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)(c.z,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:h,children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):i?"Update Item":"Create Item"}),(0,s.jsx)(c.z,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"})]})]})]})})};function J(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),{user:t}=(0,n.a)(),{categories:c,items:o,addCategory:d,updateCategory:m,deleteCategory:u,addItem:h,updateItem:x,deleteItem:g}=(0,i.K)(),b=null==e?void 0:e.categoryId,[f,N]=(0,l.useState)(null),[y,w]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1),[S,I]=(0,l.useState)(!1),[F,z]=(0,l.useState)(null),[Z,_]=(0,l.useState)(null),M=c.filter(e=>e.parentId===b),A=o.filter(e=>e.categoryId===b);(0,l.useEffect)(()=>{b&&N(c.find(e=>e.id===b)||null)},[b,c]);let E=async e=>{await u(e)},V=async e=>{await g(e)},D=async e=>{F?await m(F.id,e):await d({...e,parentId:b}),C(!1)},G=async e=>{Z?await x(Z.id,e):await h({...e,categoryId:b}),I(!1)};return f?(0,s.jsxs)("div",{children:[(0,s.jsx)(j,{currentCategory:f,onBackNavigation:()=>{(null==f?void 0:f.parentId)?a.push("/category/".concat(f.parentId)):a.push("/")},onBackToHome:()=>{a.push("/")}}),(0,s.jsx)(p,{showItems:y,user:t,subcategories:M,categoryItems:A,onAddSubcategory:()=>{z(null),C(!0)},onAddItem:()=>{_(null),I(!0)},onEditCategory:e=>{z(e),C(!0)},onDeleteCategory:E,onViewCategory:e=>{a.push("/category/".concat(e))},onEditItem:e=>{_(e),I(!0)},onDeleteItem:V,onViewItemDetails:e=>{a.push("/item/".concat(e))}}),(0,s.jsx)(v.Z,{isOpen:k,onClose:()=>C(!1),onSave:D,category:F,parentId:b}),(0,s.jsx)(W,{isOpen:S,onClose:()=>I(!1),onSave:G,item:Z,categoryId:b})]}):(0,s.jsx)("div",{children:"Loading..."})}}},function(e){e.O(0,[203,321,657,152,14,115,111,971,117,744],function(){return e(e.s=8419)}),_N_E=e.O()}]);