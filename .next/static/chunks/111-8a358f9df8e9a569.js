"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{7067:function(e,t,a){var r=a(7437);a(2265);var s=a(9820),n=a(2381),l=a(2208),o=a(5868),i=a(8930);t.Z=e=>{let{category:t,onEdit:a,onDelete:d,onView:c,showActions:u=!0}=e;return(0,r.jsxs)(s.Zb,{className:"group hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border-slate-700 hover:border-blue-500/50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden",children:[(0,r.jsx)("img",{src:t.image||"/placeholder.svg",alt:t.name,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,r.jsxs)(s.aY,{className:"p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors",children:t.name}),t.description&&(0,r.jsx)("p",{className:"text-slate-300 text-sm line-clamp-2",children:t.description})]}),(0,r.jsxs)(s.eW,{className:"p-4 pt-0 flex gap-2",children:[(0,r.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>c(t.id),className:"flex-1 bg-blue-600/10 border-blue-500/30 text-blue-400 hover:bg-blue-600/20 hover:border-blue-400",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-1"}),"View"]}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>a(t),className:"bg-yellow-600/10 border-yellow-500/30 text-yellow-400 hover:bg-yellow-600/20 hover:border-yellow-400",children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})}),(0,r.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>d(t.id),className:"bg-red-600/10 border-red-500/30 text-red-400 hover:bg-red-600/20 hover:border-red-400",children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})})]})]})]})}},1259:function(e,t,a){var r=a(7437),s=a(2265),n=a(4291),l=a(2381),o=a(279),i=a(3675),d=a(5060),c=a(1817),u=a(2489),f=a(7689),m=a(1579),p=a(3340);t.Z=e=>{let{isOpen:t,onClose:a,onSave:g,category:x,parentId:b}=e,[h,v]=(0,s.useState)({name:"",description:"",image:"",parentId:b||""}),[N,y]=(0,s.useState)(null),[j,w]=(0,s.useState)(""),[C,k]=(0,s.useState)(!1),{toast:z}=(0,p.pm)();(0,s.useEffect)(()=>{x?(v({name:x.name,description:x.description||"",image:x.image||"",parentId:x.parentId||b||""}),w(x.image||"")):(v({name:"",description:"",image:"",parentId:b||""}),w("")),y(null)},[x,b]);let R=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=e=>{var t;w(null===(t=e.target)||void 0===t?void 0:t.result)},r.readAsDataURL(a),y(a),k(!0);try{let e=await (0,m.I)(a);v(t=>({...t,image:e})),z({title:"Success",description:"Image uploaded successfully"})}catch(e){}finally{k(!1)}};return(0,r.jsx)(n.Vq,{open:t,onOpenChange:a,children:(0,r.jsxs)(n.cZ,{className:"bg-slate-900 border-slate-700 text-white max-w-md",children:[(0,r.jsx)(n.fK,{children:(0,r.jsx)(n.$N,{className:"text-xl font-bold text-blue-400",children:x?"Edit Category":"Add New Category"})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h.name.trim()&&(g({name:h.name.trim(),description:h.description.trim()||void 0,image:h.image||void 0,parentId:h.parentId||void 0}),v({name:"",description:"",image:"",parentId:""}),y(null),w(""),a())},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"name",className:"text-slate-300",children:"Category Name"}),(0,r.jsx)(o.I,{id:"name",value:h.name,onChange:e=>v(t=>({...t,name:e.target.value})),className:"bg-slate-800 border-slate-600 text-white focus:border-blue-500",placeholder:"Enter category name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"description",className:"text-slate-300",children:"Description (Optional)"}),(0,r.jsx)(i.g,{id:"description",value:h.description,onChange:e=>v(t=>({...t,description:e.target.value})),className:"bg-slate-800 border-slate-600 text-white focus:border-blue-500 resize-none",placeholder:"Enter category description",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-slate-300",children:"Category Image (Optional)"}),(0,r.jsx)("div",{className:"mt-2",children:j?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:j,alt:"Category preview",className:"w-full h-32 object-cover rounded-lg border border-slate-600"}),C&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg",children:(0,r.jsx)(c.Z,{className:"w-6 h-6 animate-spin text-blue-400"})}),(0,r.jsx)(l.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{y(null),w(""),v(e=>({...e,image:""}))},disabled:C,className:"absolute top-2 right-2 bg-red-600/80 border-red-500 text-white hover:bg-red-700",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:R,disabled:C,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"image-upload"}),(0,r.jsx)(l.z,{type:"button",variant:"outline",disabled:C,className:"w-full bg-slate-800 border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-white border-dashed h-24",asChild:!0,children:(0,r.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center justify-center gap-2",children:[C?(0,r.jsx)(c.Z,{className:"w-6 h-6 animate-spin"}):(0,r.jsx)(f.Z,{className:"w-6 h-6"}),(0,r.jsx)("span",{children:C?"Uploading...":"Upload Image"})]})})]})})]}),(0,r.jsxs)(n.cN,{className:"flex gap-2",children:[(0,r.jsx)(l.z,{type:"button",variant:"outline",onClick:a,className:"border-slate-600 text-slate-300 hover:bg-slate-800",children:"Cancel"}),(0,r.jsxs)(l.z,{type:"submit",disabled:C,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[x?"Update":"Create"," Category"]})]})]})]})})}},2381:function(e,t,a){a.d(t,{d:function(){return i},z:function(){return d}});var r=a(7437),s=a(2265),n=a(7053),l=a(535),o=a(3448);let i=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(i({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},9820:function(e,t,a){a.d(t,{Ol:function(){return o},Zb:function(){return l},aY:function(){return d},eW:function(){return c},ll:function(){return i}});var r=a(7437),s=a(2265),n=a(3448);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});c.displayName="CardFooter"},4291:function(e,t,a){a.d(t,{$N:function(){return p},Be:function(){return g},Vq:function(){return i},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var r=a(7437),s=a(2265),n=a(9027),l=a(2489),o=a(3448);let i=n.fC;n.xz;let d=n.h_;n.x8;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=n.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=n.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=n.dk.displayName},279:function(e,t,a){a.d(t,{I:function(){return l}});var r=a(7437),s=a(2265),n=a(3448);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},5060:function(e,t,a){a.d(t,{_:function(){return d}});var r=a(7437),s=a(2265),n=a(6394),l=a(535),o=a(3448);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,o.cn)(i(),a),...s})});d.displayName=n.f.displayName},3675:function(e,t,a){a.d(t,{g:function(){return l}});var r=a(7437),s=a(2265),n=a(3448);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});l.displayName="Textarea"},1579:function(e,t,a){a.d(t,{I:function(){return s},o:function(){return n}});var r=a(1072);let s=async e=>{let t=new FormData;t.append("file",e);let{data:a,error:s}=await r.O.functions.invoke("upload-to-cloudflare",{body:t});if(s)throw Error("Supabase function error");if(!a.success){if(a.error)throw Error(a.error);throw Error("Failed to upload image")}return a.imageUrl},n=(e,t)=>{var a;let r=e.split(","),s=(null===(a=r[0].match(/:(.*?);/))||void 0===a?void 0:a[1])||"image/jpeg",n=atob(r[1]),l=n.length,o=new Uint8Array(l);for(;l--;)o[l]=n.charCodeAt(l);return new File([o],t,{type:s})}}}]);