(()=>{var e={};e.id=72,e.ids=[72],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},589:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),a(7168),a(4559),a(2523);var r=a(3191),l=a(8716),s=a(7922),n=a.n(s),i=a(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["category",{children:["[categoryId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7168)),"C:\\Users\\danie\\Desktop\\Star-Wars-Collectors\\src\\app\\category\\[categoryId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4559)),"C:\\Users\\danie\\Desktop\\Star-Wars-Collectors\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,2523)),"C:\\Users\\danie\\Desktop\\Star-Wars-Collectors\\src\\app\\not-found.tsx"]}],d=["C:\\Users\\danie\\Desktop\\Star-Wars-Collectors\\src\\app\\category\\[categoryId]\\page.tsx"],u="/category/[categoryId]/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/category/[categoryId]/page",pathname:"/category/[categoryId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6422:(e,t,a)=>{Promise.resolve().then(a.bind(a,6426))},6426:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ti});var r=a(326),l=a(7577),s=a(5047),n=a(5723),i=a(4001),o=a(1664),c=a(3855),d=a(2881);let u=(0,d.Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var m=a(8235),h=a(9752),p=a(9508),x=a(8091),g=a(2714);let f=({item:e,onEdit:t,onDelete:a,onViewDetails:l,showActions:s=!0})=>r.jsx(h.Zb,{className:"bg-white border border-gray-200 hover:border-gray-300 transition-all duration-200 group cursor-pointer flex flex-col h-[415px]",children:(0,r.jsxs)(h.aY,{className:"p-0 flex flex-col flex-1 h-full",children:[(0,r.jsxs)("div",{className:"relative",children:[e.image?r.jsx("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover rounded-t-lg"}):r.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-t-lg flex items-center justify-center",children:r.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}),s&&(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(o.z,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),t(e)},className:"h-8 w-8 p-0 bg-white/90 hover:bg-white","aria-label":"Edit",children:r.jsx(p.Z,{className:"w-4 h-4"})}),r.jsx(o.z,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),a(e.id)},className:"h-8 w-8 p-0 bg-white/90 hover:bg-white border-red-200 text-red-600 hover:bg-red-50","aria-label":"Delete",children:r.jsx(x.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"p-4 flex flex-col flex-1 justify-between min-h-[180px]",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-3 text-lg line-clamp-2 min-h-[2.4em]",children:e.name}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 mb-4 min-h-[4.5em]",children:[r.jsx("div",{className:`text-sm font-medium ${"In Stock"===e.stockStatus?"text-green-600":"text-red-600"}`,children:e.stockStatus}),r.jsx("div",{className:"text-sm text-gray-600",children:e.rating?(0,r.jsxs)(r.Fragment,{children:["Rating: ",e.rating]}):r.jsx("span",{className:"opacity-0",children:"empty"})}),r.jsx("div",{className:"text-sm",children:e.valuation?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-black font-medium",children:"Value:"}),r.jsx("span",{className:"text-red-600 font-bold",children:e.valuation.toLocaleString("en-US",{style:"currency",currency:"USD"})})]}):r.jsx("span",{className:"opacity-0",children:"empty"})})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-auto",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"sm",className:"flex-1 justify-center text-blue-700 border-blue-200 hover:bg-blue-50",onClick:t=>{t.stopPropagation(),l(e.id)},"aria-label":"View",children:[r.jsx(g.Z,{className:"w-4 h-4 mr-1"}),"View"]}),s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(o.z,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),t(e)},className:"h-9 w-9 p-0 bg-white/90 hover:bg-gray-100","aria-label":"Edit",children:r.jsx(p.Z,{className:"w-4 h-4"})}),r.jsx(o.z,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),a(e.id)},className:"h-9 w-9 p-0 bg-white/90 hover:bg-red-50 border-red-200 text-red-600","aria-label":"Delete",children:r.jsx(x.Z,{className:"w-4 h-4"})})]})]})]})]})}),v=({showItems:e,user:t,subcategories:a,categoryItems:l,onAddSubcategory:s,onAddItem:n,onEditCategory:i,onDeleteCategory:d,onViewCategory:h,onEditItem:p,onDeleteItem:x,onViewItemDetails:g})=>l.length>0?(0,r.jsxs)("div",{className:"container mx-auto px-6 pb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Items (",l.length,")"]}),t&&(0,r.jsxs)(o.z,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),0===l.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsxs)("div",{className:"text-slate-400 mb-4",children:[r.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-800 rounded-full flex items-center justify-center",children:r.jsx(u,{className:"w-8 h-8"})}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No items yet"}),r.jsx("p",{className:"text-slate-500 mb-6",children:"Add your first collectible item to this category."})]}),t&&(0,r.jsxs)(o.z,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add First Item"]})]}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:l.map(e=>r.jsx(f,{item:e,onEdit:p,onDelete:x,onViewDetails:g,showActions:!!t},e.id))})]}):(0,r.jsxs)("div",{className:"container mx-auto px-6 pb-8",children:[r.jsx("div",{className:"flex justify-end items-center gap-3 mb-8",children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.z,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add Subcategory"]}),(0,r.jsxs)(o.z,{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})}),0===a.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsxs)("div",{className:"text-slate-400 mb-4",children:[r.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-slate-800 rounded-full flex items-center justify-center",children:r.jsx(c.Z,{className:"w-8 h-8"})}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No subcategories yet"}),r.jsx("p",{className:"text-slate-500 mb-6",children:"Create your first subcategory to organize your collection."})]}),t&&(0,r.jsxs)(o.z,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Add First Subcategory"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(e=>r.jsx(m.Z,{category:e,onEdit:i,onDelete:d,onView:h,showActions:!!t},e.id))})]});var b=a(6333);let y=({currentCategory:e,onBackNavigation:t,onBackToHome:a})=>r.jsx("div",{className:"relative bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700",children:(0,r.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsxs)(o.z,{variant:"outline",onClick:t,className:"bg-slate-800 border-slate-600 text-white hover:bg-slate-700",children:[r.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,r.jsxs)(o.z,{variant:"outline",onClick:a,className:"bg-slate-800 border-slate-600 text-white hover:bg-slate-700",children:[r.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[e.image&&r.jsx("img",{src:e.image,alt:e.name,className:"w-32 h-32 object-cover rounded-lg border-2 border-blue-500/30"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:e.name}),e.description&&r.jsx("p",{className:"text-slate-300 text-lg",children:e.description})]})]})]})});var j=a(3906),w=a(4118),N=a(1190),S=a(7299),C=a(2015),k=a(962),I=a(7125),M=a(2561),P=a(3661),E=a(8051),D=a(3095),R=a(7124),T=a(825),F=a(699),A=a(441),_=a(8957),V=a(7054),z=a(3078),L=a(5226),W=a(4214),Z=a(5049),q=a(2067),B=a(5819),U=a(6009),H=a(5664),O=a(8260),G=[" ","Enter","ArrowUp","ArrowDown"],K=[" ","Enter"],$="Select",[Y,X,J]=(0,P.B)($),[Q,ee]=(0,D.b)($,[J,V.D7]),et=(0,V.D7)(),[ea,er]=Q($),[el,es]=Q($),en=e=>{let{__scopeSelect:t,children:a,open:s,defaultOpen:n,onOpenChange:i,value:o,defaultValue:c,onValueChange:d,dir:u,name:m,autoComplete:h,disabled:p,required:x,form:g}=e,f=et(t),[v,b]=l.useState(null),[y,j]=l.useState(null),[w,N]=l.useState(!1),S=(0,R.gm)(u),[C=!1,k]=(0,q.T)({prop:s,defaultProp:n,onChange:i}),[I,M]=(0,q.T)({prop:o,defaultProp:c,onChange:d}),P=l.useRef(null),E=!v||g||!!v.closest("form"),[D,T]=l.useState(new Set),F=Array.from(D).map(e=>e.props.value).join(";");return(0,r.jsx)(V.fC,{...f,children:(0,r.jsxs)(ea,{required:x,scope:t,trigger:v,onTriggerChange:b,valueNode:y,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:(0,_.M)(),value:I,onValueChange:M,open:C,onOpenChange:k,dir:S,triggerPointerDownPosRef:P,disabled:p,children:[(0,r.jsx)(Y.Provider,{scope:t,children:(0,r.jsx)(el,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:l.useCallback(e=>{T(t=>{let a=new Set(t);return a.delete(e),a})},[]),children:a})}),E?(0,r.jsxs)(eH,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:h,value:I,onChange:e=>M(e.target.value),disabled:p,form:g,children:[void 0===I?(0,r.jsx)("option",{value:""}):null,Array.from(D)]},F):null]})})};en.displayName=$;var ei="SelectTrigger",eo=l.forwardRef((e,t)=>{let{__scopeSelect:a,disabled:s=!1,...n}=e,i=et(a),o=er(ei,a),c=o.disabled||s,d=(0,E.e)(t,o.onTriggerChange),u=X(a),m=l.useRef("touch"),[h,p,x]=eO(e=>{let t=u().filter(e=>!e.disabled),a=t.find(e=>e.value===o.value),r=eG(t,e,a);void 0!==r&&o.onValueChange(r.value)}),g=e=>{c||(o.onOpenChange(!0),x()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,r.jsx)(V.ee,{asChild:!0,...i,children:(0,r.jsx)(L.WV.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":eU(o.value)?"":void 0,...n,ref:d,onClick:(0,M.M)(n.onClick,e=>{e.currentTarget.focus(),"mouse"!==m.current&&g(e)}),onPointerDown:(0,M.M)(n.onPointerDown,e=>{m.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:(0,M.M)(n.onKeyDown,e=>{let t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),(!t||" "!==e.key)&&G.includes(e.key)&&(g(),e.preventDefault())})})})});eo.displayName=ei;var ec="SelectValue",ed=l.forwardRef((e,t)=>{let{__scopeSelect:a,className:l,style:s,children:n,placeholder:i="",...o}=e,c=er(ec,a),{onValueNodeHasChildrenChange:d}=c,u=void 0!==n,m=(0,E.e)(t,c.onValueNodeChange);return(0,B.b)(()=>{d(u)},[d,u]),(0,r.jsx)(L.WV.span,{...o,ref:m,style:{pointerEvents:"none"},children:eU(c.value)?(0,r.jsx)(r.Fragment,{children:i}):n})});ed.displayName=ec;var eu=l.forwardRef((e,t)=>{let{__scopeSelect:a,children:l,...s}=e;return(0,r.jsx)(L.WV.span,{"aria-hidden":!0,...s,ref:t,children:l||"▼"})});eu.displayName="SelectIcon";var em=e=>(0,r.jsx)(z.h,{asChild:!0,...e});em.displayName="SelectPortal";var eh="SelectContent",ep=l.forwardRef((e,t)=>{let a=er(eh,e.__scopeSelect),[s,n]=l.useState();return((0,B.b)(()=>{n(new DocumentFragment)},[]),a.open)?(0,r.jsx)(ef,{...e,ref:t}):s?k.createPortal((0,r.jsx)(ex,{scope:e.__scopeSelect,children:(0,r.jsx)(Y.Slot,{scope:e.__scopeSelect,children:(0,r.jsx)("div",{children:e.children})})}),s):null});ep.displayName=eh;var[ex,eg]=Q(eh),ef=l.forwardRef((e,t)=>{let{__scopeSelect:a,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:d,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:p,collisionPadding:x,sticky:g,hideWhenDetached:f,avoidCollisions:v,...b}=e,y=er(eh,a),[j,w]=l.useState(null),[N,S]=l.useState(null),C=(0,E.e)(t,e=>w(e)),[k,I]=l.useState(null),[P,D]=l.useState(null),R=X(a),[_,V]=l.useState(!1),z=l.useRef(!1);l.useEffect(()=>{if(j)return(0,H.Ry)(j)},[j]),(0,F.EW)();let L=l.useCallback(e=>{let[t,...a]=R().map(e=>e.ref.current),[r]=a.slice(-1),l=document.activeElement;for(let a of e)if(a===l||(a?.scrollIntoView({block:"nearest"}),a===t&&N&&(N.scrollTop=0),a===r&&N&&(N.scrollTop=N.scrollHeight),a?.focus(),document.activeElement!==l))return},[R,N]),Z=l.useCallback(()=>L([k,j]),[L,k,j]);l.useEffect(()=>{_&&Z()},[_,Z]);let{onOpenChange:q,triggerPointerDownPosRef:B}=y;l.useEffect(()=>{if(j){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(B.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(B.current?.y??0))}},a=a=>{e.x<=10&&e.y<=10?a.preventDefault():j.contains(a.target)||q(!1),document.removeEventListener("pointermove",t),B.current=null};return null!==B.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",a,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",a,{capture:!0})}}},[j,q,B]),l.useEffect(()=>{let e=()=>q(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[q]);let[U,G]=eO(e=>{let t=R().filter(e=>!e.disabled),a=t.find(e=>e.ref.current===document.activeElement),r=eG(t,e,a);r&&setTimeout(()=>r.ref.current.focus())}),K=l.useCallback((e,t,a)=>{let r=!z.current&&!a;(void 0!==y.value&&y.value===t||r)&&(I(e),r&&(z.current=!0))},[y.value]),$=l.useCallback(()=>j?.focus(),[j]),Y=l.useCallback((e,t,a)=>{let r=!z.current&&!a;(void 0!==y.value&&y.value===t||r)&&D(e)},[y.value]),J="popper"===s?eb:ev,Q=J===eb?{side:c,sideOffset:d,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:p,collisionPadding:x,sticky:g,hideWhenDetached:f,avoidCollisions:v}:{};return(0,r.jsx)(ex,{scope:a,content:j,viewport:N,onViewportChange:S,itemRefCallback:K,selectedItem:k,onItemLeave:$,itemTextRefCallback:Y,focusSelectedItem:Z,selectedItemText:P,position:s,isPositioned:_,searchRef:U,children:(0,r.jsx)(O.Z,{as:W.g7,allowPinchZoom:!0,children:(0,r.jsx)(A.M,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,M.M)(n,e=>{y.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,r.jsx)(T.XB,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,r.jsx)(J,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...b,...Q,onPlaced:()=>V(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:(0,M.M)(b.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||G(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let a=e.target,r=t.indexOf(a);t=t.slice(r+1)}setTimeout(()=>L(t)),e.preventDefault()}})})})})})})});ef.displayName="SelectContentImpl";var ev=l.forwardRef((e,t)=>{let{__scopeSelect:a,onPlaced:s,...n}=e,i=er(eh,a),o=eg(eh,a),[c,d]=l.useState(null),[u,m]=l.useState(null),h=(0,E.e)(t,e=>m(e)),p=X(a),x=l.useRef(!1),g=l.useRef(!0),{viewport:f,selectedItem:v,selectedItemText:b,focusSelectedItem:y}=o,j=l.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&f&&v&&b){let e=i.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),a=i.valueNode.getBoundingClientRect(),r=b.getBoundingClientRect();if("rtl"!==i.dir){let l=r.left-t.left,s=a.left-l,n=e.left-s,i=e.width+n,o=Math.max(i,t.width),d=window.innerWidth-10,u=(0,I.u)(s,[10,Math.max(10,d-o)]);c.style.minWidth=i+"px",c.style.left=u+"px"}else{let l=t.right-r.right,s=window.innerWidth-a.right-l,n=window.innerWidth-e.right-s,i=e.width+n,o=Math.max(i,t.width),d=window.innerWidth-10,u=(0,I.u)(s,[10,Math.max(10,d-o)]);c.style.minWidth=i+"px",c.style.right=u+"px"}let l=p(),n=window.innerHeight-20,o=f.scrollHeight,d=window.getComputedStyle(u),m=parseInt(d.borderTopWidth,10),h=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),y=m+h+o+parseInt(d.paddingBottom,10)+g,j=Math.min(5*v.offsetHeight,y),w=window.getComputedStyle(f),N=parseInt(w.paddingTop,10),S=parseInt(w.paddingBottom,10),C=e.top+e.height/2-10,k=v.offsetHeight/2,M=m+h+(v.offsetTop+k);if(M<=C){let e=l.length>0&&v===l[l.length-1].ref.current;c.style.bottom="0px";let t=u.clientHeight-f.offsetTop-f.offsetHeight;c.style.height=M+Math.max(n-C,k+(e?S:0)+t+g)+"px"}else{let e=l.length>0&&v===l[0].ref.current;c.style.top="0px";let t=Math.max(C,m+f.offsetTop+(e?N:0)+k);c.style.height=t+(y-M)+"px",f.scrollTop=M-C+f.offsetTop}c.style.margin="10px 0",c.style.minHeight=j+"px",c.style.maxHeight=n+"px",s?.(),requestAnimationFrame(()=>x.current=!0)}},[p,i.trigger,i.valueNode,c,u,f,v,b,i.dir,s]);(0,B.b)(()=>j(),[j]);let[w,N]=l.useState();(0,B.b)(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);let S=l.useCallback(e=>{e&&!0===g.current&&(j(),y?.(),g.current=!1)},[j,y]);return(0,r.jsx)(ey,{scope:a,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:S,children:(0,r.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,r.jsx)(L.WV.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});ev.displayName="SelectItemAlignedPosition";var eb=l.forwardRef((e,t)=>{let{__scopeSelect:a,align:l="start",collisionPadding:s=10,...n}=e,i=et(a);return(0,r.jsx)(V.VY,{...i,...n,ref:t,align:l,collisionPadding:s,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eb.displayName="SelectPopperPosition";var[ey,ej]=Q(eh,{}),ew="SelectViewport",eN=l.forwardRef((e,t)=>{let{__scopeSelect:a,nonce:s,...n}=e,i=eg(ew,a),o=ej(ew,a),c=(0,E.e)(t,i.onViewportChange),d=l.useRef(0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),(0,r.jsx)(Y.Slot,{scope:a,children:(0,r.jsx)(L.WV.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:(0,M.M)(n.onScroll,e=>{let t=e.currentTarget,{contentWrapper:a,shouldExpandOnScrollRef:r}=o;if(r?.current&&a){let e=Math.abs(d.current-t.scrollTop);if(e>0){let r=window.innerHeight-20,l=Math.max(parseFloat(a.style.minHeight),parseFloat(a.style.height));if(l<r){let s=l+e,n=Math.min(r,s),i=s-n;a.style.height=n+"px","0px"===a.style.bottom&&(t.scrollTop=i>0?i:0,a.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});eN.displayName=ew;var eS="SelectGroup",[eC,ek]=Q(eS);l.forwardRef((e,t)=>{let{__scopeSelect:a,...l}=e,s=(0,_.M)();return(0,r.jsx)(eC,{scope:a,id:s,children:(0,r.jsx)(L.WV.div,{role:"group","aria-labelledby":s,...l,ref:t})})}).displayName=eS;var eI="SelectLabel",eM=l.forwardRef((e,t)=>{let{__scopeSelect:a,...l}=e,s=ek(eI,a);return(0,r.jsx)(L.WV.div,{id:s.id,...l,ref:t})});eM.displayName=eI;var eP="SelectItem",[eE,eD]=Q(eP),eR=l.forwardRef((e,t)=>{let{__scopeSelect:a,value:s,disabled:n=!1,textValue:i,...o}=e,c=er(eP,a),d=eg(eP,a),u=c.value===s,[m,h]=l.useState(i??""),[p,x]=l.useState(!1),g=(0,E.e)(t,e=>d.itemRefCallback?.(e,s,n)),f=(0,_.M)(),v=l.useRef("touch"),b=()=>{n||(c.onValueChange(s),c.onOpenChange(!1))};if(""===s)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,r.jsx)(eE,{scope:a,value:s,disabled:n,textId:f,isSelected:u,onItemTextChange:l.useCallback(e=>{h(t=>t||(e?.textContent??"").trim())},[]),children:(0,r.jsx)(Y.ItemSlot,{scope:a,value:s,disabled:n,textValue:m,children:(0,r.jsx)(L.WV.div,{role:"option","aria-labelledby":f,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...o,ref:g,onFocus:(0,M.M)(o.onFocus,()=>x(!0)),onBlur:(0,M.M)(o.onBlur,()=>x(!1)),onClick:(0,M.M)(o.onClick,()=>{"mouse"!==v.current&&b()}),onPointerUp:(0,M.M)(o.onPointerUp,()=>{"mouse"===v.current&&b()}),onPointerDown:(0,M.M)(o.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:(0,M.M)(o.onPointerMove,e=>{v.current=e.pointerType,n?d.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,M.M)(o.onPointerLeave,e=>{e.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:(0,M.M)(o.onKeyDown,e=>{d.searchRef?.current!==""&&" "===e.key||(K.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});eR.displayName=eP;var eT="SelectItemText",eF=l.forwardRef((e,t)=>{let{__scopeSelect:a,className:s,style:n,...i}=e,o=er(eT,a),c=eg(eT,a),d=eD(eT,a),u=es(eT,a),[m,h]=l.useState(null),p=(0,E.e)(t,e=>h(e),d.onItemTextChange,e=>c.itemTextRefCallback?.(e,d.value,d.disabled)),x=m?.textContent,g=l.useMemo(()=>(0,r.jsx)("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:f,onNativeOptionRemove:v}=u;return(0,B.b)(()=>(f(g),()=>v(g)),[f,v,g]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.WV.span,{id:d.textId,...i,ref:p}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?k.createPortal(i.children,o.valueNode):null]})});eF.displayName=eT;var eA="SelectItemIndicator",e_=l.forwardRef((e,t)=>{let{__scopeSelect:a,...l}=e;return eD(eA,a).isSelected?(0,r.jsx)(L.WV.span,{"aria-hidden":!0,...l,ref:t}):null});e_.displayName=eA;var eV="SelectScrollUpButton",ez=l.forwardRef((e,t)=>{let a=eg(eV,e.__scopeSelect),s=ej(eV,e.__scopeSelect),[n,i]=l.useState(!1),o=(0,E.e)(t,s.onScrollButtonChange);return(0,B.b)(()=>{if(a.viewport&&a.isPositioned){let e=function(){i(t.scrollTop>0)},t=a.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[a.viewport,a.isPositioned]),n?(0,r.jsx)(eZ,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=a;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});ez.displayName=eV;var eL="SelectScrollDownButton",eW=l.forwardRef((e,t)=>{let a=eg(eL,e.__scopeSelect),s=ej(eL,e.__scopeSelect),[n,i]=l.useState(!1),o=(0,E.e)(t,s.onScrollButtonChange);return(0,B.b)(()=>{if(a.viewport&&a.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;i(Math.ceil(t.scrollTop)<e)},t=a.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[a.viewport,a.isPositioned]),n?(0,r.jsx)(eZ,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=a;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});eW.displayName=eL;var eZ=l.forwardRef((e,t)=>{let{__scopeSelect:a,onAutoScroll:s,...n}=e,i=eg("SelectScrollButton",a),o=l.useRef(null),c=X(a),d=l.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return l.useEffect(()=>()=>d(),[d]),(0,B.b)(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,r.jsx)(L.WV.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:(0,M.M)(n.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(s,50))}),onPointerMove:(0,M.M)(n.onPointerMove,()=>{i.onItemLeave?.(),null===o.current&&(o.current=window.setInterval(s,50))}),onPointerLeave:(0,M.M)(n.onPointerLeave,()=>{d()})})}),eq=l.forwardRef((e,t)=>{let{__scopeSelect:a,...l}=e;return(0,r.jsx)(L.WV.div,{"aria-hidden":!0,...l,ref:t})});eq.displayName="SelectSeparator";var eB="SelectArrow";function eU(e){return""===e||void 0===e}l.forwardRef((e,t)=>{let{__scopeSelect:a,...l}=e,s=et(a),n=er(eB,a),i=eg(eB,a);return n.open&&"popper"===i.position?(0,r.jsx)(V.Eh,{...s,...l,ref:t}):null}).displayName=eB;var eH=l.forwardRef((e,t)=>{let{value:a,...s}=e,n=l.useRef(null),i=(0,E.e)(t,n),o=function(e){let t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(a);return l.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(o!==a&&t){let r=new Event("change",{bubbles:!0});t.call(e,a),e.dispatchEvent(r)}},[o,a]),(0,r.jsx)(U.T,{asChild:!0,children:(0,r.jsx)("select",{...s,ref:i,defaultValue:a})})});function eO(e){let t=(0,Z.W)(e),a=l.useRef(""),r=l.useRef(0),s=l.useCallback(e=>{let l=a.current+e;t(l),function e(t){a.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(l)},[t]),n=l.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,s,n]}function eG(e,t,a){var r;let l=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=(r=Math.max(a?e.indexOf(a):-1,0),e.map((t,a)=>e[(r+a)%e.length]));1===l.length&&(s=s.filter(e=>e!==a));let n=s.find(e=>e.textValue.toLowerCase().startsWith(l.toLowerCase()));return n!==a?n:void 0}eH.displayName="BubbleSelect";let eK=(0,d.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),e$=(0,d.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),eY=(0,d.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var eX=a(1223);let eJ=l.forwardRef(({className:e,children:t,...a},l)=>(0,r.jsxs)(eo,{ref:l,className:(0,eX.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(eu,{asChild:!0,children:r.jsx(eK,{className:"h-4 w-4 opacity-50"})})]}));eJ.displayName=eo.displayName;let eQ=l.forwardRef(({className:e,...t},a)=>r.jsx(ez,{ref:a,className:(0,eX.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(e$,{className:"h-4 w-4"})}));eQ.displayName=ez.displayName;let e0=l.forwardRef(({className:e,...t},a)=>r.jsx(eW,{ref:a,className:(0,eX.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(eK,{className:"h-4 w-4"})}));e0.displayName=eW.displayName;let e1=l.forwardRef(({className:e,children:t,position:a="popper",...l},s)=>r.jsx(em,{children:(0,r.jsxs)(ep,{ref:s,className:(0,eX.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...l,children:[r.jsx(eQ,{}),r.jsx(eN,{className:(0,eX.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(e0,{})]})}));e1.displayName=ep.displayName,l.forwardRef(({className:e,...t},a)=>r.jsx(eM,{ref:a,className:(0,eX.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=eM.displayName;let e2=l.forwardRef(({className:e,children:t,...a},l)=>(0,r.jsxs)(eR,{ref:l,className:(0,eX.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(e_,{children:r.jsx(eY,{className:"h-4 w-4"})})}),r.jsx(eF,{children:t})]}));e2.displayName=eR.displayName,l.forwardRef(({className:e,...t},a)=>r.jsx(eq,{ref:a,className:(0,eX.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=eq.displayName;var e4=a(7506),e6=a(3685),e3=a(4019),e5=a(6522),e8=a(4097),e7=a(9258);let e9=()=>{let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(!1),{toast:s}=(0,e8.pm)(),[n,i]=(0,l.useState)(null),o=async()=>{try{let{data:e,error:a}=await e7.O.from("items").select("manufacturer").not("manufacturer","is",null).not("manufacturer","eq","");if(a)throw a;let r=[...new Set(e.map(e=>e.manufacturer).filter(Boolean))].sort();t(r)}catch(e){i("Failed to load manufacturers")}};return(0,l.useEffect)(()=>{o()},[]),{manufacturers:e,loading:a,setLoading:r,addManufacturer:a=>e.some(e=>e.toLowerCase()===a.toLowerCase())?(s({title:"Duplicate Manufacturer",description:"This manufacturer already exists",variant:"destructive"}),!1):(t(e=>[...e,a].sort()),s({title:"Manufacturer Added",description:"The manufacturer will be saved when you save the item"}),!0),editManufacturer:(a,r)=>{let l=e.indexOf(a);if(-1===l)return!1;if(e.some((e,t)=>e.toLowerCase()===r.toLowerCase()&&t!==l))return s({title:"Duplicate Manufacturer",description:"This manufacturer name already exists",variant:"destructive"}),!1;let n=[...e];return n[l]=r,t(n.sort()),s({title:"Manufacturer Updated",description:"The change will be saved when you save the item"}),!0},error:n}},te=({value:e,onChange:t,onSave:a,onCancel:l,placeholder:s,loading:n})=>(0,r.jsxs)("div",{className:"flex gap-2 items-center mt-1",children:[r.jsx(N.I,{autoFocus:!0,value:e,placeholder:s,className:"flex-1 bg-white border-gray-300 text-black",onChange:e=>t(e.target.value),onKeyDown:t=>{"Enter"===t.key&&e.trim()&&!n&&a(),"Escape"===t.key&&l()},disabled:n}),r.jsx(o.z,{type:"button",className:"px-2",disabled:!e.trim()||n,onClick:a,children:r.jsx(eY,{className:"w-4 h-4"})}),r.jsx(o.z,{type:"button",className:"px-2",variant:"ghost",onClick:l,disabled:n,children:r.jsx(e3.Z,{className:"w-4 h-4"})})]}),tt=(0,d.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ta=({value:e,onChange:t,manufacturers:a,onEdit:l,onAddNew:s,loading:n})=>(0,r.jsxs)(en,{value:e,onValueChange:t,children:[r.jsx(eJ,{className:"bg-white border-gray-300 text-black",children:r.jsx(ed,{placeholder:"Select manufacturer"})}),(0,r.jsxs)(e1,{className:"bg-white max-h-60 overflow-y-auto z-[60]",children:[a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center w-full group",children:[r.jsx(e2,{value:e,className:"flex-1",children:e}),r.jsx(o.z,{type:"button",size:"sm",variant:"ghost",tabIndex:-1,className:"p-1 ml-1 text-gray-400 hover:text-blue-600",onClick:a=>{a.stopPropagation(),l(e,t)},children:r.jsx(tt,{className:"w-3 h-3"})})]},e)),r.jsx("div",{className:"px-2 py-1",children:r.jsx(o.z,{type:"button",className:"w-full text-blue-600 justify-start px-2 py-1",variant:"ghost",onClick:s,disabled:n,children:"+ Add Manufacturer"})})]})]});function tr({value:e,onChange:t,initialManufacturers:a=[]}){let{manufacturers:s,loading:n,setLoading:i,addManufacturer:o,editManufacturer:c}=e9(),[d,u]=(0,l.useState)("select"),[m,h]=(0,l.useState)(""),[p,x]=(0,l.useState)(null),g=async()=>{if(!m.trim())return;let e=m.trim();o(e)&&(t(e),h(""),u("select"))},f=async()=>{if(null===p||!m.trim())return;let e=s[p],a=m.trim();c(e,a)&&(t(a),h(""),x(null),u("select"))},v=()=>{h(""),u("select"),x(null)};return"add"===d?r.jsx(te,{value:m,onChange:h,onSave:g,onCancel:v,placeholder:"Manufacturer name",loading:n}):"edit"===d&&null!==p?r.jsx(te,{value:m,onChange:h,onSave:f,onCancel:v,placeholder:"Manufacturer name",loading:n}):r.jsx("div",{children:r.jsx(ta,{value:e,onChange:t,manufacturers:s,onEdit:(e,t)=>{u("edit"),x(t),h(e)},onAddNew:()=>{h(""),u("add"),x(null)},loading:n})})}let tl=Array.from({length:19},(e,t)=>{let a=(.5*t+1).toFixed(1).replace(".0","");return`C-${a}`}),ts=Array.from({length:17},(e,t)=>(5*t+20).toString()),tn=({isOpen:e,onClose:t,onSave:a,item:s,categoryId:n})=>{let[i,c]=(0,l.useState)({name:"",stockStatus:"In Stock",rating:"",valuation:"",manufacturer:"",yearManufactured:"",afaNumber:"",afaGrade:"",description:"",boughtFor:"",variations:""}),[d,u]=(0,l.useState)([]),[m,h]=(0,l.useState)(!1),{toast:p}=(0,e8.pm)();(0,l.useEffect)(()=>{s?(c({name:s.name||"",stockStatus:s.stockStatus||"In Stock",rating:s.rating||"",valuation:s.valuation?.toString()||"",manufacturer:s.manufacturer||"",yearManufactured:s.yearManufactured?.toString()||"",afaNumber:s.afaNumber||"",afaGrade:s.afaGrade||"",description:s.description||"",boughtFor:s.boughtFor?.toString()||"",variations:s.variations||""}),s.images&&s.images.length>0?u(s.images):s.image?u([s.image]):u([])):(c({name:"",stockStatus:"In Stock",rating:"",valuation:"",manufacturer:"",yearManufactured:"",afaNumber:"",afaGrade:"",description:"",boughtFor:"",variations:""}),u([]))},[s]);let x=async e=>{let t=Array.from(e.target.files||[]),a=4-d.length,r=t.slice(0,a);if(t.length>a&&p({title:"Upload Limit",description:`You can only upload ${a} more image(s). Maximum of 4 images allowed.`,variant:"destructive"}),0!==r.length){h(!0);try{let e=r.map(async e=>{try{return await (0,e5.I)(e)}catch(t){return p({title:"Upload Error",description:`Failed to upload ${e.name}`,variant:"destructive"}),null}}),t=(await Promise.all(e)).filter(e=>null!==e);t.length>0&&(u(e=>[...e,...t]),p({title:"Upload Successful",description:`${t.length} image(s) uploaded successfully`}))}catch(e){p({title:"Upload Error",description:"Failed to upload images",variant:"destructive"})}finally{h(!1)}}},g=e=>{u(t=>t.filter((t,a)=>a!==e))},f=async e=>{e.preventDefault();let r=d.filter(e=>e.startsWith("data:")),l=d.filter(e=>!e.startsWith("data:"));if(r.length>0){h(!0);try{let e=r.map(async(e,t)=>{let a=(0,e5.o)(e,`${i.name}-${t}.jpg`);return await (0,e5.I)(a)}),t=await Promise.all(e);l=[...l,...t],p({title:"Processing Complete",description:"All images have been uploaded to cloud storage"})}catch(e){p({title:"Upload Error",description:"Some images failed to upload",variant:"destructive"})}finally{h(!1)}}a({name:i.name,categoryId:n,stockStatus:i.stockStatus,rating:i.rating||void 0,valuation:i.valuation?parseFloat(i.valuation):void 0,image:l[0]||void 0,images:l.length>0?l:void 0,manufacturer:i.manufacturer||void 0,yearManufactured:i.yearManufactured?parseInt(i.yearManufactured):void 0,afaNumber:i.afaNumber||void 0,afaGrade:i.afaGrade?i.afaGrade:void 0,description:i.description||void 0,boughtFor:i.boughtFor?parseFloat(i.boughtFor):void 0,variations:i.variations||void 0}),t()};return r.jsx(w.Vq,{open:e,onOpenChange:t,children:(0,r.jsxs)(w.cZ,{className:"bg-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(w.fK,{children:r.jsx(w.$N,{className:"text-black",children:s?"Edit Item":"Add New Item"})}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"name",className:"text-black",children:"Item Name *"}),r.jsx(N.I,{id:"name",value:i.name,onChange:e=>c(t=>({...t,name:e.target.value})),required:!0,className:"bg-white border-gray-300 text-black"})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"stockStatus",className:"text-black",children:"Stock Status"}),(0,r.jsxs)(en,{value:i.stockStatus,onValueChange:e=>c(t=>({...t,stockStatus:e})),children:[r.jsx(eJ,{className:"bg-white border-gray-300 text-black",children:r.jsx(ed,{})}),(0,r.jsxs)(e1,{className:"bg-white",children:[r.jsx(e2,{value:"In Stock",children:"In Stock"}),r.jsx(e2,{value:"Out of Stock",children:"Out of Stock"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"rating",className:"text-black",children:"Rating"}),(0,r.jsxs)(en,{value:i.rating,onValueChange:e=>c(t=>({...t,rating:e})),children:[r.jsx(eJ,{className:"bg-white border-gray-300 text-black",id:"rating",children:r.jsx(ed,{placeholder:"Select rating"})}),r.jsx(e1,{className:"bg-white max-h-60 overflow-y-auto",children:tl.map(e=>r.jsx(e2,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"valuation",className:"text-black",children:"Valuation ($)"}),r.jsx(N.I,{id:"valuation",type:"number",step:"0.01",value:i.valuation,onChange:e=>c(t=>({...t,valuation:e.target.value})),className:"bg-white border-gray-300 text-black"})]})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"boughtFor",className:"text-black",children:"Bought For ($)"}),r.jsx(N.I,{id:"boughtFor",type:"number",step:"0.01",value:i.boughtFor,onChange:e=>c(t=>({...t,boughtFor:e.target.value})),className:"bg-white border-gray-300 text-black"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"manufacturer",className:"text-black",children:"Manufacturer"}),r.jsx(tr,{value:i.manufacturer,onChange:e=>c(t=>({...t,manufacturer:e}))})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"yearManufactured",className:"text-black",children:"Year"}),r.jsx(N.I,{id:"yearManufactured",type:"number",value:i.yearManufactured,onChange:e=>c(t=>({...t,yearManufactured:e.target.value})),className:"bg-white border-gray-300 text-black"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"afaNumber",className:"text-black",children:"AFA Number"}),r.jsx(N.I,{id:"afaNumber",value:i.afaNumber,onChange:e=>c(t=>({...t,afaNumber:e.target.value})),className:"bg-white border-gray-300 text-black"})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"afaGrade",className:"text-black",children:"AFA Grade"}),(0,r.jsxs)(en,{value:i.afaGrade||"none",onValueChange:e=>c(t=>({...t,afaGrade:"none"===e?"":e})),children:[r.jsx(eJ,{className:"bg-white border-gray-300 text-black",id:"afaGrade",children:r.jsx(ed,{placeholder:"Select grade"})}),(0,r.jsxs)(e1,{className:"bg-white max-h-60 overflow-y-auto",children:[r.jsx(e2,{value:"none",children:"None"}),ts.map(e=>r.jsx(e2,{value:e,children:e},e))]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"variations",className:"text-black",children:"Variations"}),r.jsx(N.I,{id:"variations",value:i.variations,onChange:e=>c(t=>({...t,variations:e.target.value})),className:"bg-white border-gray-300 text-black"})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{className:"text-black",children:"Images (Maximum 4)"}),(0,r.jsxs)("div",{className:"space-y-4 mt-2",children:[(0,r.jsxs)("div",{children:[r.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",id:"image-upload",multiple:!0,disabled:d.length>=4||m}),r.jsx(o.z,{type:"button",variant:"outline",onClick:()=>document.getElementById("image-upload")?.click(),className:"w-full bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100",disabled:d.length>=4||m,children:m?(0,r.jsxs)(r.Fragment,{children:[r.jsx(e4.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(e6.Z,{className:"w-4 h-4 mr-2"}),d.length>=4?"Maximum 4 Images Reached":`Upload Images (${d.length}/4)`]})})]}),d.length>0&&r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:d.map((e,t)=>(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("img",{src:e,alt:`Preview ${t+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-300"}),r.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>g(t),className:"absolute top-1 right-1 bg-red-600/90 border-red-500 text-white hover:bg-red-700 w-6 h-6 p-0",disabled:m,children:r.jsx(e3.Z,{className:"w-3 h-3"})}),0===t&&r.jsx("div",{className:"absolute bottom-1 left-1 bg-blue-600/90 text-white text-xs px-2 py-1 rounded",children:"Main"})]},t))}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"✅ Cloud Storage Active"}),r.jsx("p",{children:"Images are automatically uploaded to Cloudflare's global CDN for optimal performance and reliability."})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx(S._,{htmlFor:"description",className:"text-black",children:"Description"}),r.jsx(C.g,{id:"description",value:i.description,onChange:e=>c(t=>({...t,description:e.target.value})),rows:3,className:"bg-white border-gray-300 text-black"})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[r.jsx(o.z,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:m,children:m?(0,r.jsxs)(r.Fragment,{children:[r.jsx(e4.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):s?"Update Item":"Create Item"}),r.jsx(o.z,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"})]})]})]})})};function ti(){let e=(0,s.useParams)(),t=(0,s.useRouter)(),{user:a}=(0,i.a)(),{categories:o,items:c,addCategory:d,updateCategory:u,deleteCategory:m,addItem:h,updateItem:p,deleteItem:x}=(0,n.K)(),g=e?.categoryId,[f,b]=(0,l.useState)(null),[w,N]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[k,I]=(0,l.useState)(!1),[M,P]=(0,l.useState)(null),[E,D]=(0,l.useState)(null),R=o.filter(e=>e.parentId===g),T=c.filter(e=>e.categoryId===g),F=async e=>{await m(e)},A=async e=>{await x(e)},_=async e=>{M?await u(M.id,e):await d({...e,parentId:g}),C(!1)},V=async e=>{E?await p(E.id,e):await h({...e,categoryId:g}),I(!1)};return f?(0,r.jsxs)("div",{children:[r.jsx(y,{currentCategory:f,onBackNavigation:()=>{f?.parentId?t.push(`/category/${f.parentId}`):t.push("/")},onBackToHome:()=>{t.push("/")}}),r.jsx(v,{showItems:w,user:a,subcategories:R,categoryItems:T,onAddSubcategory:()=>{P(null),C(!0)},onAddItem:()=>{D(null),I(!0)},onEditCategory:e=>{P(e),C(!0)},onDeleteCategory:F,onViewCategory:e=>{t.push(`/category/${e}`)},onEditItem:e=>{D(e),I(!0)},onDeleteItem:A,onViewItemDetails:e=>{t.push(`/item/${e}`)}}),r.jsx(j.Z,{isOpen:S,onClose:()=>C(!1),onSave:_,category:M,parentId:g}),r.jsx(tn,{isOpen:k,onClose:()=>I(!1),onSave:V,item:E,categoryId:g})]}):r.jsx("div",{children:"Loading..."})}},7168:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\danie\Desktop\Star-Wars-Collectors\src\app\category\[categoryId]\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[912,958,773,873],()=>a(589));module.exports=r})();